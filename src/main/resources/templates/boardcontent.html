<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê²Œì‹œê¸€ ì‘ì„±</title>
<style>
body {
	font-family: Arial, sans-serif;
	line-height: 1.6;
	margin: 0;
	padding: 20px;
	background-color: #f9f9f9;
}

.container {
	max-width: 600px;
	margin: 0 auto;
	background: #fff;
	padding: 20px;
	border-radius: 8px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	margin-top: 65px;
}

.container h1 {
	text-align: center;
	color: #333;
}

.container form {
	display: flex;
	flex-direction: column;
}

.container label {
	margin-top: 10px;
	font-weight: bold;
}

.container  input, .container textarea, .container  select {
	margin-top: 5px;
	padding: 10px;
	font-size: 16px;
	border: 1px solid #ddd;
	border-radius: 4px;
	width: 100%;
	box-sizing: border-box;
}

.container textarea {
	height: 150px;
	resize: none;
}

.container button {
	margin-top: 20px;
	padding: 10px;
	font-size: 16px;
	color: #fff;
	background-color: #007bff;
	border: none;
	border-radius: 4px;
	cursor: pointer;
}

.container button:hover {
	background-color: #0056b3;
}

.container .comment-section {
	margin-top: 40px;
	border-top: 2px solid #ddd;
	padding-top: 20px;
}

.container .comment {
	margin-bottom: 15px;
	padding: 10px;
	background-color: #f1f1f1;
	border-radius: 4px;
}

.container .comment-author {
	font-weight: bold;
}

.container .comment-text {
	margin-top: 5px;
}

#like.active {
	background-color: red;; /* ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™” ì‹œ ë°°ê²½ìƒ‰ (ì˜ˆ: ì—°í•œ ë¹¨ê°„ìƒ‰) */
}

#dislike.active {
	background-color: red; /* ì‹«ì–´ìš” ë²„íŠ¼ í™œì„±í™” ì‹œ ë°°ê²½ìƒ‰ (ì˜ˆ: ì—°í•œ íšŒìƒ‰) */
}

.commentlike.active {
	background-color: red;; /* ì¢‹ì•„ìš” ë²„íŠ¼ í™œì„±í™” ì‹œ ë°°ê²½ìƒ‰ (ì˜ˆ: ì—°í•œ ë¹¨ê°„ìƒ‰) */
}

.commentdislike.active {
	background-color: red; /* ì‹«ì–´ìš” ë²„íŠ¼ í™œì„±í™” ì‹œ ë°°ê²½ìƒ‰ (ì˜ˆ: ì—°í•œ íšŒìƒ‰) */
}

/* ëª¨ë“  í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ */
input:not([type="checkbox"]) {
	/*   background-color: lightgray; */
	border: 1px solid black;
}

/* ëª¨ë“  ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
input[type="checkbox"] {
	width: 20px;
	height: 20px;
}

/* íŠ¹ì • ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
#isPrivate {
	width: 18px;
	height: 18px;
	accent-color: blue;
}
</style>
<link rel="stylesheet" type="text/css" href="/css/commentData.css">

</head>
<body>

	<div th:replace="~{header.html}"></div>
	<div class="container">
		<h1>ê²Œì‹œê¸€ ì‘ì„±</h1>

		<!--ë¡œê·¸ì¸ ì¤‘ì¸ ìœ ì € -->
		<!--         <label for="title">ë¡œê·¸ì¸ ìœ ì €</label> -->
		<input type="hidden" th:value="${principalDetails.name}"
			id="principalDetails" name="principalDetails" readonly>


		<!-- ê¸€ ë²ˆí˜¸ -->
		<label for="title">ê¸€ ë²ˆí˜¸</label> <input type="text"
			th:value="${board.id}" id="id" name="id" readonly> <label
			for="buy_Sell">í•­ëª©</label> <input type="text"
			th:value="${board.buy_Sell}" id="buy_Sell" name="buy_Sell" readonly>

		<label for="category">ë¬¼í’ˆ ì¢…ë¥˜</label> <input type="text"
			th:value="${board.category}" id="category" name="category" readonly>

		<label for="createTime">ë“±ë¡ì¼</label> <input type="text"
			th:value="${#dates.format(board.createTime, 'yyyy-MM-dd HH:mm')}"
			id="createTime" name="createTime" readonly>


		<!-- ì œëª© ì…ë ¥ -->
		<label for="title">ì œëª©</label> <input type="text"
			th:value="${board.title}" id="title" name="title"
			placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" readonly> <label for="name">ì‘ì„±ì</label>
		<div style="display: flex; align-items: center;">
			<!-- í”„ë¡œí•„ ì´ë¯¸ì§€ -->
			<div th:if="${board.memberEntity.profileImage != null}">
				<div id="imagePreview" style="margin-top: 10px;">
					<img id="previewImage"
						th:src="@{{imagePath}(imagePath=${board.memberEntity.profileImage})}"
						alt="Profile Image Preview"
						style="display: block; width: 50px; height: 50px; margin-right: 10px;">
				</div>
			</div>

			<div th:if="${board.memberEntity.profileImage == null}">
				<div id="imagePreview" style="margin-top: 10px;">
					<img id="previewImage" src="/boardimage/nullimage.jpg"
						alt="no profile image"
						style="display: block; width: 50px; height: 50px; margin-right: 10px;">
				</div>
			</div>


			<!-- ì´ë¦„ -->
			<span th:text="${board.memberEntity.name}"></span>
		</div>

		<!--       ì²¨ë¶€ íŒŒì¼ -->
		<!--             <label for="boardFile">ì²¨ë¶€ íŒŒì¼</label> -->
		<!--             <input type ="file"  id="boardFile" name="boardFile" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"  th:result=""/> -->


		<!-- ì‘ì„±ì ì•„ì´ë”” (hidden) -->
		<input type="hidden" th:value="${board.memberEntity.userid}"
			id="userid" name="userid"> <input type="hidden"
			th:value="${board.memberEntity.id}" id="memberid" name="memberid">


		<div th:if="${board.memberEntity.userid != principalDetails.name}">
			<!-- If the logged-in user's `userid` is not the same as the board's owner, show Like and Dislike buttons -->
			<div style="display: flex;">
				<button type="button" id="like" name="like"
					th:text="'â¤ï¸ ' + ${board.totalLike}">â¤ï¸ Like</button>
				<button type="button" id="dislike" name="dislike"
					th:text="'ğŸ–¤ ' + ${board.totalDislike}">ğŸ–¤ Dislike</button>
			</div>
		</div>

		<div th:unless="${board.memberEntity.userid != principalDetails.name}">
			<!-- If the logged-in user's `userid` is the same as the board's owner, show Like and Dislike count only -->
			<div style="display: flex;">
				<p th:text="'ì¢‹ì•„ìš” : ' + ${board.totalLike}">ì¢‹ì•„ìš”</p>
				<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
				<p th:text="'ì‹«ì–´ìš” : ' + ${board.totalDislike}">ì‹«ì–´ìš”</p>
			</div>
		</div>
		<!-- ë¬¼í’ˆëª… ì…ë ¥ -->
		<label for="product">ë¬¼í’ˆ</label> <input type="text"
			th:value="${board.product}" id="product" name="product"
			placeholder="ë¬¼ê±´ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" readonly>

		<!-- ê°€ê²© ì…ë ¥ -->
		<label for="price">ê°€ê²©</label> <input type="text"
			th:value="${board.price}" id="price" name="price"
			placeholder="ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”" readonly> <br>
			
			
			
			
			     <!-- ì£¼ì†Œ -->
			     	<label for="address">ì£¼ì†Œ</label> 
               <input type="text" id="address" name="address" th:value="${board.address}" required /><br>
            
            
            
          
			
			
			
			
			 <br>
		<!-- ì¡°íšŒìˆ˜ (disabled) -->
		<label for="view">ì¡°íšŒìˆ˜</label> <input type="text"
			th:value="${board.view}" id="view" name="view" disabled> <label
			for="boardFiles">ì²¨ë¶€ íŒŒì¼</label>
		<div
			style="display: flex; flex-direction: row; flex-wrap: wrap; margin-top: 10px;">
			<!--     boardFiles ë°°ì—´ì´ ë¹„ì–´ ìˆì§€ ì•Šì€ ê²½ìš° -->
			<div th:if="${boardFiles != null and boardFiles.length > 0}"
				th:each="file : ${boardFiles}">
				<div style="margin-right: 10px; margin-bottom: 10px;">
					<a th:href="@{${file}}"> <img th:src="@{${file}}"
						alt="ì²¨ë¶€ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°" loading="lazy"
						style="display: block; width: 100px; height: 100px;">
					</a> <a th:href="@{${file}}" download>ë‹¤ìš´ë¡œë“œ</a>
				</div>
			</div>

			<!--     boardFiles ë°°ì—´ì´ ë¹„ì–´ ìˆëŠ” ê²½ìš° -->
			<div th:if="${boardFiles == null or boardFiles.length == 0}">
				<div style="margin-right: 10px; margin-bottom: 10px;">
					<img src="/boardimage/nullimage.jpg" alt="ì²¨ë¶€ íŒŒì¼ ì—†ìŒ"
						style="display: block; width: 100px; height: 100px;">
					<p>ì²¨ë¶€ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
				</div>
			</div>
		</div>



		<!-- ë‚´ìš© ì…ë ¥ -->
		<label for="contents">ë‚´ìš©</label>
		<textarea id="contents" th:text="${board.contents}" name="contents"
			placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required readonly></textarea>


		<!-- boardFiles ë°°ì—´ì„ ë°˜ë³µí•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì¶œë ¥ -->


		<!--  â€»enumì„ ì§ì ‘ í˜¸ì¶œí•˜ë©´ toString()ì„ ìë™ìœ¼ë¡œ í˜¸ì¶œí•¨ -->
		<!-- â€» í•˜ì§€ë§Œ enumì˜ ê²½ìš° ë¬¸ìì—´ì„ ë¹„êµí•˜ë ¤ë©´ .nameì„ ì¨ì•¼í•¨  -->
		<!-- 				 ì‚½ë‹ˆë‹¤ ì¹´í…Œê³ ë¦¬ì˜ ê²½ìš° êµ¬ë§¤ ì¤‘/ ì˜ˆì•½/ êµ¬ë§¤ì™„ë£Œ ë²„íŠ¼  -->



		<!-- 'ì‚½ë‹ˆë‹¤' ì¹´í…Œê³ ë¦¬ -->
		<!-- 		<div -->
		<!-- 			th:if="${board.memberEntity.userid == principalDetails.name && board.buy_Sell.name == 'ì‚½ë‹ˆë‹¤' }"> -->
		<!-- 			<button type="button" th:id="|buy-${board.id}|" -->
		<!-- 				th:data-TradeBoardId="${board.id}">ê±°ë˜ ì¤‘</button> -->
		<!-- 		</div> -->

		<!-- 'íŒë‹ˆë‹¤' ì¹´í…Œê³ ë¦¬ -->
		<!-- 		<div -->
		<!-- 			th:if="${board.memberEntity.userid == principalDetails.name && board.buy_Sell.name  == 'íŒë‹ˆë‹¤'}"> -->
		<!-- 			<button type="button" th:id="|sell-${board.id}|" -->
		<!-- 				th:data-TradeBoardId="${board.id}">íŒë§¤ ì¤‘</button> -->
		<!-- 		</div> -->

		<!-- 		<div -->
		<!-- 			th:if="${board.memberEntity.userid != principalDetails.name && board.buy_Sell.name  == 'íŒë‹ˆë‹¤'}"> -->
		<!-- 			<button type="button" th:id="|enroll-Sell-${board.id}|" -->
		<!-- 				th:data-TradeSellBoardId="${board.id}">êµ¬ë§¤ ìš”ì²­</button> -->
		<!-- 		</div> -->

		<!-- <div th:each="trade : ${board.trades}"> -->
		<!--     <div th:if="${board.memberEntity.userid != principalDetails.name}"> -->
		<!--         <div th:if="${(trade.accept1 == false || trade.accept2 == false || trade.accept1 == null || trade.accept2 == null)}"> -->
		<!--             <button type="button" th:id="|enroll-Buy-${board.id}|" -->
		<!--                     th:data-TradeBuyBoardId="${board.id}">ê±°ë˜ ìš”ì²­</button> -->
		<!--         </div> -->
		<!--     </div> -->
		<!-- </div> -->





					<div
			th:if="${board.memberEntity.userid != principalDetails.name && #lists.isEmpty(board.trades)}">
			<button type="button" th:id="|enroll-Book1-${board.id}|"
				th:data-TradeBook1BoardId="${board.id}">ì˜ˆì•½ ì‹ ì²­</button>
		</div>


		<div
			th:if="${board.memberEntity.userid != principalDetails.name && #lists.isEmpty(board.trades)}">
			<button type="button" th:id="|enroll-Buy-${board.id}|"
				th:data-TradeBuyBoardId="${board.id}">ê±°ë˜ ì‹ ì²­</button>
		</div>

		<div th:each="trade : ${board.trades}">
			<div style="display: flex;">
			
	  	<div th:if="${
              board.id == trade.boardEntity.id  
             and trade.booking1 
              and trade.booking2
             and trade?.tradeStatus?.name != 'ì™„ë£Œ'}"> 
      <button type="button" th:id="|enroll-Book2-${board.id}|" th:data-TradeBook2BoardId="${board.id}">
        ì˜ˆì•½ ì¤‘
    </button>
    
      
</div>    
	
		<div th:if="${
              board.id == trade.boardEntity.id  
             and trade.booking1 
              and trade.booking2
             and trade?.tradeStatus?.name != 'ì™„ë£Œ'
            and board.memberEntity.userid == principalDetails.name}"> 
		<button type="button" th:id="|change-enroll-Book2-${board.id}|" th:data-TradeBook2BoardId="${board.id}">
        ê±°ë˜ ì¤‘ìœ¼ë¡œ ë³€í™˜
    </button>



</div>  

			
				<div
					th:if="${board.id == trade.boardEntity.id 
             and trade.accept1  == true
             and trade.accept2  == true
             and trade?.tradeStatus?.name != 'ì™„ë£Œ'}">
					<button type="button" th:id="|enroll-Sell-${board.id}|"
						th:data-TradeSellBoardId="${board.id}">ê±°ë˜ ì§„í–‰ ì¤‘</button>
				</div>
				<div
					th:if="${board.id == trade.boardEntity.id
             and trade.accept1  == true
             and trade.accept2  == true
             and board.memberEntity.userid == principalDetails.name 
             and trade?.tradeStatus?.name != 'ì™„ë£Œ'}">

					<button type="button" th:id="|complete2-Sell-${trade.id}|"
						th:data-Complete2TradeSellBoardId="${board.id}">ê±°ë˜ì™„ë£Œ</button>
				</div>
			</div>
			
				<div
					th:if="${
					             (trade.booking1  == true
             and trade.booking2  == true) 
             or (trade.accept1  == true
             and trade.accept2  == true)
             and trade?.tradeStatus?.name != 'ì™„ë£Œ'}">
					<button type="button" th:id="|cancel-trade-${trade.id}|"
						th:data-CancelTradeSellBoardId="${trade.id}">ê±°ë˜ ì·¨ì†Œ</button>
				</div>
			
			<div
				th:if="${trade.tradeStatus != null and trade.tradeStatus.name == 'ì™„ë£Œ'}">
				<p>ê±°ë˜ê°€ ì™„ë£Œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤</p>
			</div>

		</div>





		<!-- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ (ì¡°ê±´ë¶€ í‘œì‹œ) -->
		<div th:if="${board.memberEntity.userid == principalDetails.name}">
			<!--             <button type="button" id="updateBoard"  onClick= "goUpdateForm()">ìˆ˜ì •í•˜ê¸°</button>								ì „ì—­ìŠ¤ ì½”í”„ë¡œ ì²˜ë¦¬í•˜ëŠ” ë²• -->
			<!-- 			<button type="button" id="updateBoard">ìˆ˜ì •</button> -->
			<!-- 			<button type="button" id="deleteBoard">ì‚­ì œ</button> -->



			<button type="button" th:id="|updateBoard-${board.id}|"
				th:data-updateBoardId="${board.id}"
				th:onclick="'window.location.href=\'/board/updateboard/' + ${board.id} + '\';'">ìˆ˜ì •</button>
			<button type="button" style="background-color: red"
				;
              th:id="|deleteBoard-${board.id}|"
				th:data-deleteBoardId="${board.id}">ì‚­ì œ</button>
		</div>

		<!-- ëŒ“ê¸€ ì‘ì„± í¼ -->
		<div class="comment-section">
			<!--             <form id="commentForm"> -->
			<label for="commentText">ëŒ“ê¸€</label>
			<textarea id="commentText" name="commentText" placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”"
				required></textarea>
			<div style="display: flex; gap: 10px; align-items: center;">
				<label style="display: flex; align-items: center; gap: 5px;">
					<input type="checkbox" id="isPrivate">ê²Œì‹œìë§Œ ë³´ê¸°
				</label>
				<button type="button" id="submitComment" style="margin-top: 8px;">ì‘ì„±</button>
			</div>
			<br>
			<!--             </form> -->

			<!-- ëŒ“ê¸€ ëª©ë¡ -->
			<div id="commentsList">
				<!--                 <div  class="comment"> -->
				<!--                     <p class="comment-author">í™ê¸¸ë™</p> -->
				<!--                     <p class="comment-text">ì´ê²ƒì€ ëŒ“ê¸€ ì˜ˆì‹œì…ë‹ˆë‹¤.</p> -->
				<!--                 </div> -->
				<!-- ë‹¤ë¥¸ ëŒ“ê¸€ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤. -->
			</div>
		</div>
	</div>
		<div th:replace="~{footer.html}"></div>

	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

	<script src="/js/updateComment.js" type="module"></script>
	<script src="/js/deleteComment.js" type="module"></script>
	<script src="/js/deleteBoard.js" type="text/javascript"></script>


	<script src="/js/getComment.js" type="module"></script>
	<script src="/js/addComment.js" type="module"></script>
	<!-- 	<script type="module" src="/js/commentLike.js"></script> -->
	<script src="/js/boardLike.js" type="module"></script>
	<script src="/js/tradeModule.js" type="module"></script>
	<script src="/js/chatModule.js" type="module"></script>

	<!-- 	 <th:block th:replace="/footer :: footerFragment"></th:block> -->
</body>
</html>
